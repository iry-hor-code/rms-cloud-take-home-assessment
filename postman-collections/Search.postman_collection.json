
{
	"info": {
		"_postman_id": "4975bb89-5f7f-4b26-8140-c4d533734648",
		"name": "Search",
		"description": "RMS Cloud Search API collection for availability and rates data with comprehensive testing",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48228879",
		"_collection_link": "https://iry-hor-code-2868581.postman.co/workspace/iry-hor-api's-Workspace~2e4a9176-0e5f-460f-80e5-97f5589b1653/collection/48228879-4975bb89-5f7f-4b26-8140-c4d533734648?action=share&source=collection_link&creator=48228879"
	},
	"item": [
		{
			"name": "Get Category Availability and Rates",
			"event": [
				{
					"listen": "prerequest",
					"script": {
				"exec": [],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
				"exec": [
					"// Valid search request should return availability data",
					"pm.test('Response time is acceptable', function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(10000);",
					"});",
					"",
					"pm.test('Valid search request returns success', function () {",
					"    pm.expect(pm.response.code).to.equal(200);",
					"});",
					"",
					"pm.test('Success response contains availability data', function () {",
					"    const responseJson = pm.response.json();",
					"    pm.expect(responseJson).to.be.an('object');",
					"    ",
					"    // Store useful data for future requests",
					"    if (responseJson.searchId) {",
					"        pm.environment.set('lastSearchId', responseJson.searchId);",
					"    }",
					"    if (responseJson.sessionId) {",
					"        pm.environment.set('lastSessionId', responseJson.sessionId);",
					"    }",
					"});"
				],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json, text/plain, */*",
						"description": "Acceptable response content types"
					},
					{
						"key": "accept-language",
						"value": "en-GB,en;q=0.6",
						"description": "Preferred language for response"
					},
					{
						"key": "Cookie",
						"value": "__stripe_mid={{stripe_mid}}; ApiCookie={{api_cookie}}; __stripe_sid={{stripe_sid}}; _dd_s={{dd_session}}",
						"description": "Authentication and session cookies"
					},
					{
						"key": "priority",
						"value": "u=1, i",
						"description": "Request priority hint"
					},
					{
						"key": "referer",
						"value": "{{base_url}}/{{client_id}}/1",
						"description": "Referrer page URL"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Chromium\";v=\"140\", \"Not=A?Brand\";v=\"24\", \"Brave\";v=\"140\"",
						"description": "Client user agent hints"
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0",
						"description": "Mobile device indicator"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"macOS\"",
						"description": "Client platform information"
					},
					{
						"key": "sec-fetch-dest",
						"value": "empty",
						"description": "Request destination type"
					},
					{
						"key": "sec-fetch-mode",
						"value": "cors",
						"description": "Request mode for CORS"
					},
					{
						"key": "sec-fetch-site",
						"value": "same-origin",
						"description": "Request site relationship"
					},
					{
						"key": "sec-gpc",
						"value": "1",
						"description": "Global Privacy Control signal"
					},
					{
						"key": "user-agent",
						"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/140.0.0.0 Safari/537.36",
						"description": "Client user agent string"
					}
				],
				"url": {
					"raw": "{{base_url}}/OnlineApi/GetCatAvailRatesData?clientId={{client_id}}&onlineAgentId={{agent_id}}&adults={{adults}}&children={{children}}&infants={{infants}}&arriveDate={{arrive_date}}&departDate={{depart_date}}&additional1=0&additional2=0&additional3=0&additional4=0&additional5=0&additional6=0&additional7=0&bookingType={{booking_type}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"OnlineApi",
						"GetCatAvailRatesData"
					],
					"query": [
						{
							"key": "clientId",
							"value": "{{client_id}}",
							"description": "Unique client identifier for the booking system"
						},
						{
							"key": "onlineAgentId",
							"value": "{{agent_id}}",
							"description": "Online agent ID handling the search request"
						},
						{
							"key": "adults",
							"value": "{{adults}}",
							"description": "Number of adult guests (minimum 1)"
						},
						{
							"key": "children",
							"value": "{{children}}",
							"description": "Number of child guests"
						},
						{
							"key": "infants",
							"value": "{{infants}}",
							"description": "Number of infant guests"
						},
						{
							"key": "arriveDate",
							"value": "{{arrive_date}}",
							"description": "Check-in date in MM/DD/YYYY format (URL encoded as MM%2FDD%2FYYYY)"
						},
						{
							"key": "departDate",
							"value": "{{depart_date}}",
							"description": "Check-out date in MM/DD/YYYY format (URL encoded as MM%2FDD%2FYYYY)"
						},
						{
							"key": "additional1",
							"value": "0",
							"description": "Additional parameter 1 (hardcoded to 0)"
						},
						{
							"key": "additional2",
							"value": "0",
							"description": "Additional parameter 2 (hardcoded to 0)"
						},
						{
							"key": "additional3",
							"value": "0",
							"description": "Additional parameter 3 (hardcoded to 0)"
						},
						{
							"key": "additional4",
							"value": "0",
							"description": "Additional parameter 4 (hardcoded to 0)"
						},
						{
							"key": "additional5",
							"value": "0",
							"description": "Additional parameter 5 (hardcoded to 0)"
						},
						{
							"key": "additional6",
							"value": "0",
							"description": "Additional parameter 6 (hardcoded to 0)"
						},
						{
							"key": "additional7",
							"value": "0",
							"description": "Additional parameter 7 (hardcoded to 0)"
						},
						{
							"key": "bookingType",
							"value": "{{booking_type}}",
							"description": "Type of booking (e.g., 3 for standard booking)"
						}
					]
				},
				"description": "Searches for available accommodation categories and their rates for specified dates and guest counts. This endpoint returns availability and pricing information for the RMS Cloud booking system."
			},
			"response": [
				{
					"name": "Successful Search Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "application/json, text/plain, */*"
							},
							{
								"key": "Cookie",
								"value": "__stripe_mid=d5d06d7f-ee4d-47c4-9dd8-f7d46867e26a498461; ApiCookie=valid_token_here"
							}
						],
						"url": {
							"raw": ""
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"categories\": [\n        {\n            \"categoryId\": \"CAT001\",\n            \"categoryName\": \"Standard Room\",\n            \"available\": true,\n            \"baseRate\": 150.00,\n            \"totalRate\": 165.00,\n            \"currency\": \"AUD\",\n            \"maxOccupancy\": 2\n        }\n    ],\n    \"searchId\": \"search_123456\",\n    \"totalResults\": 1,\n    \"currency\": \"AUD\",\n    \"dates\": {\n        \"checkIn\": \"2025-09-12\",\n        \"checkOut\": \"2025-09-19\"\n    }\n}"
				},
				{
					"name": "Authentication Error",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "application/json, text/plain, */*"
							}
						],
						"url": {
							"raw": ""
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"Unauthorized\",\n    \"message\": \"Invalid or missing authentication credentials\",\n    \"errorCode\": \"AUTH_001\",\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\n}"
				},
				{
					"name": "Invalid Date Range Error",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "accept",
								"value": "application/json, text/plain, */*"
							},
							{
								"key": "Cookie",
								"value": "__stripe_mid=d5d06d7f-ee4d-47c4-9dd8-f7d46867e26a498461; ApiCookie=valid_token_here"
							}
						],
						"url": {
							"raw": ""
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"error\": \"Bad Request\",\n    \"message\": \"Invalid date range: departure date must be after arrival date\",\n    \"errorCode\": \"DATE_001\",\n    \"timestamp\": \"2024-01-15T10:30:00Z\"\n}"
				}
			]
		},
		{
			"name": "Get Category Availability - Missing Required Parameters",
			"event": [
				{
					"listen": "test",
					"script": {
				"exec": [
					"pm.test('Missing required parameters returns bad request', function () {",
					"    pm.expect(pm.response.code).to.equal(400);",
					"});",
					"",
					"pm.test('Error response provides validation message', function () {",
					"    const responseText = pm.response.text();",
					"    pm.expect(responseText.length).to.be.greaterThan(0);",
					"});"
				],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Cookie",
						"value": "__stripe_mid={{stripe_mid}}; ApiCookie={{api_cookie}}; __stripe_sid={{stripe_sid}}; _dd_s={{dd_session}}",
						"description": "Authentication and session cookies"
					}
				],
				"url": {
					"raw": "{{base_url}}/OnlineApi/GetCatAvailRatesData?clientId={{client_id}}&onlineAgentId={{agent_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"OnlineApi",
						"GetCatAvailRatesData"
					],
					"query": [
						{
							"key": "clientId",
							"value": "{{client_id}}",
							"description": "Client ID provided"
						},
						{
							"key": "onlineAgentId",
							"value": "{{agent_id}}",
							"description": "Agent ID provided"
						}
					]
				},
				"description": "Test case for missing required parameters (adults, arriveDate, departDate, bookingType missing)"
			},
			"response": []
		},
		{
			"name": "Get Category Availability - Invalid Date Format",
			"event": [
				{
					"listen": "test",
					"script": {
				"exec": [
					"pm.test('Invalid date format returns validation error', function () {",
					"    pm.expect(pm.response.code).to.equal(422);",
					"});"
				],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Cookie",
						"value": "__stripe_mid={{stripe_mid}}; ApiCookie={{api_cookie}}; __stripe_sid={{stripe_sid}}; _dd_s={{dd_session}}"
					}
				],
				"url": {
					"raw": "{{base_url}}/OnlineApi/GetCatAvailRatesData?clientId={{client_id}}&onlineAgentId={{agent_id}}&adults=2&children=0&infants=0&arriveDate=invalid-date&departDate=also-invalid&bookingType=3",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"OnlineApi",
						"GetCatAvailRatesData"
					],
					"query": [
						{
							"key": "clientId",
							"value": "{{client_id}}"
						},
						{
							"key": "onlineAgentId",
							"value": "{{agent_id}}"
						},
						{
							"key": "adults",
							"value": "2"
						},
						{
							"key": "children",
							"value": "0"
						},
						{
							"key": "infants",
							"value": "0"
						},
						{
							"key": "arriveDate",
							"value": "invalid-date",
							"description": "Invalid date format"
						},
						{
							"key": "departDate",
							"value": "also-invalid",
							"description": "Invalid date format"
						},
						{
							"key": "bookingType",
							"value": "3"
						}
					]
				},
				"description": "Test case for invalid date formats in arriveDate and departDate parameters"
			},
			"response": []
		},
		{
			"name": "Get Category Availability - Invalid Guest Counts",
			"event": [
				{
					"listen": "test",
					"script": {
				"exec": [
					"pm.test('Zero adults returns validation error', function () {",
					"    pm.expect(pm.response.code).to.equal(422);",
					"});"
				],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Cookie",
						"value": "__stripe_mid={{stripe_mid}}; ApiCookie={{api_cookie}}; __stripe_sid={{stripe_sid}}; _dd_s={{dd_session}}"
					}
				],
				"url": {
					"raw": "{{base_url}}/OnlineApi/GetCatAvailRatesData?clientId={{client_id}}&onlineAgentId={{agent_id}}&adults=0&children=5&infants=2&arriveDate={{arrive_date}}&departDate={{depart_date}}&bookingType=3",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"OnlineApi",
						"GetCatAvailRatesData"
					],
					"query": [
						{
							"key": "clientId",
							"value": "{{client_id}}"
						},
						{
							"key": "onlineAgentId",
							"value": "{{agent_id}}"
						},
						{
							"key": "adults",
							"value": "0",
							"description": "Zero adults - should be rejected"
						},
						{
							"key": "children",
							"value": "5"
						},
						{
							"key": "infants",
							"value": "2"
						},
						{
							"key": "arriveDate",
							"value": "{{arrive_date}}"
						},
						{
							"key": "departDate",
							"value": "{{depart_date}}"
						},
						{
							"key": "bookingType",
							"value": "3"
						}
					]
				},
				"description": "Test case for invalid guest counts - zero adults should be rejected as business rule violation"
			},
			"response": []
		},
		{
			"name": "Get Category Availability - Past Dates",
			"event": [
				{
					"listen": "test",
					"script": {
				"exec": [
					"pm.test('Past dates return validation error', function () {",
					"    pm.expect(pm.response.code).to.equal(422);",
					"});"
				],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "Cookie",
						"value": "__stripe_mid={{stripe_mid}}; ApiCookie={{api_cookie}}; __stripe_sid={{stripe_sid}}; _dd_s={{dd_session}}"
					}
				],
				"url": {
					"raw": "{{base_url}}/OnlineApi/GetCatAvailRatesData?clientId={{client_id}}&onlineAgentId={{agent_id}}&adults=2&children=0&infants=0&arriveDate=01%2F01%2F2020&departDate=01%2F05%2F2020&bookingType=3",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"OnlineApi",
						"GetCatAvailRatesData"
					],
					"query": [
						{
							"key": "clientId",
							"value": "{{client_id}}"
						},
						{
							"key": "onlineAgentId",
							"value": "{{agent_id}}"
						},
						{
							"key": "adults",
							"value": "2"
						},
						{
							"key": "children",
							"value": "0"
						},
						{
							"key": "infants",
							"value": "0"
						},
						{
							"key": "arriveDate",
							"value": "01%2F01%2F2020",
							"description": "Past date - January 1, 2020"
						},
						{
							"key": "departDate",
							"value": "01%2F05%2F2020",
							"description": "Past date - January 5, 2020"
						},
						{
							"key": "bookingType",
							"value": "3"
						}
					]
				},
				"description": "Test case for past dates to verify temporal validation"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
			"exec": []
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
			"exec": []
			}
		}
	],
	"variable": [
		{
			"key": "collection_version",
			"value": "1.0.0",
			"type": "string"
		},
		{
			"key": "collection_description",
			"value": "Search API collection for RMS Cloud availability and rates",
			"type": "string"
		}
	]
}